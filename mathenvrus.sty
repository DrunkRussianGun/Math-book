% Стилевой файл
% - новые команды:
%	- \opbr{математический знак} (operator break) — разрешает перенос строки на данном знаке,
%	  автоматически дублируя его на следующей;
%	- \mult и \notmult — знак кратности в математической моде;
%	- \bigand — n-арная версия \land (печатается увеличенным символом);
%	- \lAnd — знак конъюнкции для связывания высказываний;
%	- \lOr — знак дизъюнкции для связывания высказываний;
%	- \Arg — печатает Arg в математической моде;
%	- \grad — печатает grad в математической моде;
%	- \sgn — печатает sgn в математической моде;
%	- \indbase (induction base) — оформление базы математической индукции;
%	- \indstep (induction step) — оформление шага математической индукции;
%	- \indend (induction end) — конец метода математической индукции.
% - переопределённые команды:
%	- \* — работает аналогично \opbr\cdot, но при отсутствии переноса строки ничего не делает;
%	- \land — теперь печатает &.
% - новые окружения:
%	- statement для утверждений;
%	- lemma для лемм;
%	- theorem для теорем;
%	- consequent для следствий;
%	- proof[пояснение] для доказательств;
%	- proofmathind для доказательств методом математической индукции;
%	- proofcontra для доказательств методом от противного.

\usepackage[intlimits]{amsmath}
\usepackage{amsfonts, amssymb}
\usepackage{scalerel} % увеличение размера символов
\usepackage{xparse} % продвинутое создание окружений

\NewDocumentCommand\opbr{m}{%
	#1\nobreak\discretionary{}{\hbox{\ensuremath{#1}}}{}%
}

\NewDocumentCommand\mult{}{\mathrel{\raise -0.6mm\hbox{\vdots}}}
\NewDocumentCommand\notmult{}{\mathrel{{\mkern -0.2mu\not}\mult}}

\RenewDocumentCommand\land{}{\mathbin{\&}}
\NewDocumentCommand\bigand{}{\mathop{\scalerel*{\&}{\sum}}}
\NewDocumentCommand\lAnd{}{\mathrel{\&}}
\NewDocumentCommand\lOr{}{\mathrel{\lor}}

\DeclareMathOperator\Arg{Arg}
\DeclareMathOperator\grad{grad}
\DeclareMathOperator\sgn{sgn}
	
\NewDocumentCommand\indbase{}{%
	\begin{itemize}%
	\item \textit{База индукции.\ }%
}
\NewDocumentCommand\indstep{}{%
	\item \textit{Шаг индукции.\ }%
}
\NewDocumentCommand\indend{}{%
	\end{itemize}%
}

\RenewDocumentCommand{\*}{}{%
	\discretionary{\hbox{\ensuremath{\cdot}}}{\hbox{\ensuremath{\cdot}}}{}%
}

\RenewDocumentCommand{\@begintheorem}{mm}{%
	\par\textbf{#1\ #2.\ }\begingroup\slshape%
}
\RenewDocumentCommand{\@opargbegintheorem}{mmm}{%
	\par\textbf{#1\ #2\ (#3).\ }\begingroup\slshape%
}
\RenewDocumentCommand{\@endtheorem}{}{\endgroup}

\newtheorem{theorem}{Теорема}[section]
\newtheorem{statement}{Утверждение}[section]
\newtheorem{lemma}{Лемма}[section]
\newtheorem{consequent}{Следствие}[section]

\NewDocumentEnvironment{proof}{o}
	{\par\textbf{Доказательство\IfNoValueTF{#1}{}{ #1}.}}
	{$\scriptstyle\blacksquare$}
\NewDocumentEnvironment{proofmathind}{}
	{\par\textbf{Доказательство методом математической индукции.}}
	{$\scriptstyle\blacksquare$}
\NewDocumentEnvironment{proofcontra}{}
	{\par\textbf{Доказательство методом от противного.}}
	{$\scriptstyle\blacksquare$}