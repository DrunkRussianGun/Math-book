\section{Элементы комбинаторики}
Пусть элемент~$A$ можно выбрать $m$~способами, а элемент~$B$~--- $n$~способами. Существуют основные правила комбинаторики:
\begin{enumerate}
	\item \textbf{Правило суммы:} выбор либо $A$, либо $B$ можно сделать $m + n$~способами.
	\item \textbf{Правило произведения:} выбор $A$ и $B$ можно сделать $m \cdot n$~способами.
\end{enumerate}

\index{!} \index{Факториал} \textbf{Факториалом числа~$n \in \mathbb N$} называется произведение $1 \cdot 2 \cdot \ldots \cdot n$ и обозначается~$n!$.
Также принято считать, что $0! = 1$.

\textbf{Двойным факториалом числа~$n \in \mathbb N$} называется произведение всех натуральных чисел той~же чётности, что и~$n$, и обозначается~$n!!$.
Т.\,о., $(2k)!! = 2 \cdot 4 \cdot \ldots \cdot (2k)$, $(2k - 1)!! = 1 \cdot 3 \cdot \ldots \cdot (2k - 1)$, где $k \in \mathbb N$.
Также принято считать, что $0!! = 1$.

\index{Перестановка} \textbf{Перестановкой} $n$-элементного \textbf{множества~$A$} называется биекция $f \colon \{ 1, 2, \ldots, n \} \to A$ и записывается в~виде упорядоченного набора $(a_1, a_2, \ldots, a_n)$, где $a_i = f(i), \ i = 1, 2, \ldots, n$.

\index{Размещение} \textbf{$k$-элементным размещением} $n$-элементного \textbf{множества~$A$}, или \textbf{размещением из $n$~элементов по $k$}, называется инъекция $f \colon \{ 1, 2, \ldots, n \} \to A$.
Количество $k$-элементных размещений $n$-элементного множества обозначается $A_n^k$.

\begin{statement}
$\displaystyle A_n^k = \frac{n!}{(n - k)!}$
\end{statement}
\begin{proofmathind}
	\indbase При $k = 1$ $\displaystyle A_n^1 = n = \frac{n!}{(n - 1)!}$.
	\indstep Пусть теорема верна при $k - 1$.
	Докажем её для $k$.
	Разобьём все $k$-элементные размещения $n$-элементного множества на группы так, чтобы во~всех размещениях одной группы на первом месте стоял один и тот~же элемент.
	Получим $n$~групп.
	В каждом размещении на оставшихся $k - 1$~местах могут стоять остальные $n - 1$ элементов.
	Т.\,о., по предположению индукции в каждой группе $A_{n-1}^{k-1}$~размещений.
	Тогда всего размещений $\displaystyle n \cdot A_{n-1}^{k-1} = \frac{n!}{(n - k)!} = A_n^k$. \indend
\end{proofmathind}

\begin{consequent}
Количество перестановок $n$-элементного множества равно $n!$.
\end{consequent}
\begin{proof}
Заметим, что искомое количество равно $A_n^n = \frac{n!}{0!} = n!$.
\end{proof}

\index{Сочетание} \textbf{$k$-элементным сочетанием} $n$-элементного \textbf{множества~$A$}, или \textbf{сочетанием из $n$~элементов по $k$}, называется множество $X \subseteq A \colon |X| = k$.
Количество $k$-элементных сочетаний $n$-элементного множества обозначается $C_n^k$, или $\binom{n}{k}$.

\begin{statement}
$\displaystyle C_n^k = \frac{n!}{k! (n - k)!}$
\end{statement}
\begin{proof}
Разобьём множество всех перестановок $n$-элементного множества на группы так, чтобы во всех перестановках одной группы на первых $k$~местах находились одни и те~же элементы (в том или ином порядке), тогда и на последних $n - k$~местах будут находиться одни и те~же элементы.
Получим $C_n^k$~групп.
В перестановках одной группы первые $k$~элементов могут находиться в произвольном порядке, т.\,е. они могут быть расположены $k!$~способами.
Аналогично последние $n - k$~элементов могут быть расположены $(n - k)!$~способами.
Тогда, учитывая правило произведения, получим $\displaystyle n! = C_n^k k! (n - k)! \Leftrightarrow C_n^k = \frac{n!}{k! (n - k)!}$.
\end{proof}

\index{Инверсия} \textbf{Инверсией в перестановке~$\pi$} называется пара индексов $i, j \colon i < j \lAnd \pi(i) > \pi(j)$.
\textbf{Чётность перестановки} определяется чётностью числа инверсией в ней.

\begin{statement}
\label{st:parity_of_permutation}
Если в перестановке~$(a_1, a_2, \ldots, a_n)$ поменять местами два элемента, то её чётность изменится.
\end{statement}
\begin{proof}
\begin{enumerate}
	\item Пусть переставлены соседние элементы.
	Если они образовывали инверсию, то после обмена местами не образуют, и наоборот.
	При этом наличие инверсий с остальными элементами остаётся неизменным.
	Значит, количество инверсий в перестановке изменилось на~$1$, т.\,е. чётность числа инверсий изменилась, тогда изменилась и чётность перестановки.
	
	\item Поменяем местами элементы $a_i$ и $a_{i+d}$, где $d > 0$.
	Для этого последовательно поменяем местами элементы, имеющие индексы $i+d$ и $i+d-1$, $i+d-1$ и $i+d-2$, \ldots, $i+2$ и $i+1$, $i+1$ и $i$, $i+1$ и $i+2$, $i+2$ и $i+3$, \ldots, $i+d-2$ и $i+d-1$, $i+d-1$ и $i+d$.
	Всего совершили $2d - 1$~обменов соседних элементов местами, тогда перестановка изменила чётность, т.\,к. $2d - 1 \notmult 2$.
\end{enumerate}
\end{proof}